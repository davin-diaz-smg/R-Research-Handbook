<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Handbook for Research - 2&nbsp; Key Drivers models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./quick_r_tips.html" rel="next">
<link href="./correlations.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Key Drivers models</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Handbook for Research</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlations.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Correlations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./key_drivers.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Key Drivers models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quick_r_tips.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Quick R tips</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview"><span class="toc-section-number">2.1</span>  Overview</a>
  <ul class="collapse">
  <li><a href="#advantages-of-relative-weights" id="toc-advantages-of-relative-weights" class="nav-link" data-scroll-target="#advantages-of-relative-weights"><span class="toc-section-number">2.1.1</span>  Advantages of Relative Weights:</a></li>
  <li><a href="#how-we-use-relative-weights-at-smg-with-our-key-driver-analysis" id="toc-how-we-use-relative-weights-at-smg-with-our-key-driver-analysis" class="nav-link" data-scroll-target="#how-we-use-relative-weights-at-smg-with-our-key-driver-analysis"><span class="toc-section-number">2.1.2</span>  How we use Relative Weights at SMG with our Key Driver analysis</a></li>
  </ul></li>
  <li><a href="#running-the-key-driver-analysis" id="toc-running-the-key-driver-analysis" class="nav-link" data-scroll-target="#running-the-key-driver-analysis"><span class="toc-section-number">2.2</span>  Running the Key Driver Analysis</a>
  <ul class="collapse">
  <li><a href="#materials-applications-to-run-key-drivers" id="toc-materials-applications-to-run-key-drivers" class="nav-link" data-scroll-target="#materials-applications-to-run-key-drivers"><span class="toc-section-number">2.2.1</span>  Materials &amp; Applications to run Key Drivers</a></li>
  <li><a href="#pull-the-data" id="toc-pull-the-data" class="nav-link" data-scroll-target="#pull-the-data"><span class="toc-section-number">2.2.2</span>  Pull the data</a></li>
  <li><a href="#prepare-data" id="toc-prepare-data" class="nav-link" data-scroll-target="#prepare-data"><span class="toc-section-number">2.2.3</span>  Prepare data</a></li>
  <li><a href="#get-correlations" id="toc-get-correlations" class="nav-link" data-scroll-target="#get-correlations"><span class="toc-section-number">2.2.4</span>  Get correlations</a></li>
  <li><a href="#get-descriptives" id="toc-get-descriptives" class="nav-link" data-scroll-target="#get-descriptives"><span class="toc-section-number">2.2.5</span>  Get descriptives</a></li>
  <li><a href="#run-key-drivers-function" id="toc-run-key-drivers-function" class="nav-link" data-scroll-target="#run-key-drivers-function"><span class="toc-section-number">2.2.6</span>  Run key drivers function</a></li>
  </ul></li>
  <li><a href="#interpreting-the-key-driver-results" id="toc-interpreting-the-key-driver-results" class="nav-link" data-scroll-target="#interpreting-the-key-driver-results"><span class="toc-section-number">2.3</span>  Interpreting the Key Driver Results</a>
  <ul class="collapse">
  <li><a href="#overview-1" id="toc-overview-1" class="nav-link" data-scroll-target="#overview-1"><span class="toc-section-number">2.3.1</span>  Overview</a></li>
  <li><a href="#reading-the-output---correlations" id="toc-reading-the-output---correlations" class="nav-link" data-scroll-target="#reading-the-output---correlations"><span class="toc-section-number">2.3.2</span>  Reading the Output - Correlations</a></li>
  <li><a href="#reading-the-output---descriptives" id="toc-reading-the-output---descriptives" class="nav-link" data-scroll-target="#reading-the-output---descriptives"><span class="toc-section-number">2.3.3</span>  Reading the Output - Descriptives</a></li>
  <li><a href="#reading-the-output-relative-weights-r" id="toc-reading-the-output-relative-weights-r" class="nav-link" data-scroll-target="#reading-the-output-relative-weights-r"><span class="toc-section-number">2.3.4</span>  Reading the Output – Relative Weights &amp; R</a></li>
  </ul></li>
  <li><a href="#building-a-key-driver-model" id="toc-building-a-key-driver-model" class="nav-link" data-scroll-target="#building-a-key-driver-model"><span class="toc-section-number">2.4</span>  Building a Key Driver Model</a>
  <ul class="collapse">
  <li><a href="#overview-2" id="toc-overview-2" class="nav-link" data-scroll-target="#overview-2"><span class="toc-section-number">2.4.1</span>  Overview</a></li>
  <li><a href="#step-1-conceptualizing-the-kd-model" id="toc-step-1-conceptualizing-the-kd-model" class="nav-link" data-scroll-target="#step-1-conceptualizing-the-kd-model"><span class="toc-section-number">2.4.2</span>  Step 1: Conceptualizing the KD Model</a></li>
  <li><a href="#step-2-sample-considerations" id="toc-step-2-sample-considerations" class="nav-link" data-scroll-target="#step-2-sample-considerations"><span class="toc-section-number">2.4.3</span>  Step 2: Sample Considerations</a></li>
  <li><a href="#step-3-choosing-measures" id="toc-step-3-choosing-measures" class="nav-link" data-scroll-target="#step-3-choosing-measures"><span class="toc-section-number">2.4.4</span>  Step 3: Choosing Measures</a></li>
  <li><a href="#step-4-validating" id="toc-step-4-validating" class="nav-link" data-scroll-target="#step-4-validating"><span class="toc-section-number">2.4.5</span>  Step 4: Validating</a></li>
  <li><a href="#final-notes" id="toc-final-notes" class="nav-link" data-scroll-target="#final-notes"><span class="toc-section-number">2.4.6</span>  Final Notes</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Key Drivers models</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="overview" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="overview"><span class="header-section-number">2.1</span> Overview</h2>
<p>“Multiple regression is perhaps the most frequently used statistical tool for the analysis of data in the organizational sciences. The information provided by such analyses is particularly useful for addressing issues related to prediction such as identifying a set of predictors that will maximize the amount of variance explained in the criterion. However, most researchers and practitioners are simultaneously interested in multiple regression for theory testing or explanation purposes. Here, the question of interest becomes understanding the extent to which each variable drives the prediction. Essentially, one wishes to understand the contribution each predictor makes towards explaining variance in the criterion. Past research has documented how indices commonly produced by multiple regression analyses fail to appropriately partition variance to the various predictors when they are correlated (Darlington 1968). In response, two alternative approaches, dominance analysis (Budescu 1993) and relative weight analysis (Fabbris 1980; Johnson 2000), have been developed that allow for more accurate variance partitioning among correlated predictors.”</p>
<p>From “Relative Importance Analysis: A Useful Supplement to Regression Analysis” – <a href="S:\Research\TALENT%20DEVELOPMENT\Research%20Training\Training\Research%20Technical%20Training\Relative%20Weights\Relative%20Weights%20Analysis%20Overview.pdf">found here</a></p>
<p>Relative weights analysis uses the correlations between the dependent and independent variables and determines what percentage of the explained variance can be attributed back to each independent variable. The benefit to relative weights is that these percentages are additive, meaning that you can sum up the percentages to create groups with similar themes. For instance, questions about the helpfulness, friendliness, and knowledge of associates can be grouped to create an associates factor.</p>
<section id="advantages-of-relative-weights" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="advantages-of-relative-weights"><span class="header-section-number">2.1.1</span> Advantages of Relative Weights:</h3>
<ul>
<li><p>Relative weights are specifically developed for use with correlated predictors</p></li>
<li><p>Considers the predictive value of the variable both in isolation and in the presence of other variables</p></li>
<li><p>The non-scaled weights sum to the R-squared and thus can be used as estimates of relative effect sizes</p></li>
<li><p>Relative weights are easily rescaled into proportions or percentages which is easily communicated to clients</p></li>
</ul>
</section>
<section id="how-we-use-relative-weights-at-smg-with-our-key-driver-analysis" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="how-we-use-relative-weights-at-smg-with-our-key-driver-analysis"><span class="header-section-number">2.1.2</span> How we use Relative Weights at SMG with our Key Driver analysis</h3>
<p>Key Driver Analyses are the key deliverable and the bread-and-butter of the Research Department. With key driver analysis, we are concerned with evaluating the relative importance of different aspects of the customer’s product and service experience in predicting their Overall Satisfaction.</p>
<p>The Relative Weights analysis works very well with the types of variables we utilize in our analyses at SMG, as they are usually very highly correlated. When we run a linear regression, it typically results in one variable taking the lion’s share of variance as the top driver, while the rest fall in at a much smaller variance due to the nature of linear regressions. Using Relative Weights allows us to assign that shared variance back to the original variables, which results in a much more balanced predictive model. In addition, it’s easier for clients to understand as the rescaled importance weights sum to 100%.</p>
<p>Our Key Driver models are filtered down to only 4’s &amp; 5’s (or satisfied and highly satisfied) for Overall Satisfaction. We do this to hone in on what is most important to driving loyalty. When we look at our loyalty curve crosstabs (% Highly Likely to Return or Recommend broken out by Overall Satisfaction rating), we see that moving a 4 (Satisfied) on OSAT to a 5 (Highly Satisfied) on OSAT results in a two to three times greater % Highly Likely to Return or Recommend. In addition, normally about two thirds of guests fall into these two buckets, so it’s very representative of the survey guest base. If a client is interested in a full-scale approach, consider running Rewards &amp; Penalties, covered later in this section as well as in section 8 of the training manual “SMart Gen II”, Analyses: Key Driver (Relative Weights).</p>
</section>
</section>
<section id="running-the-key-driver-analysis" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="running-the-key-driver-analysis"><span class="header-section-number">2.2</span> Running the Key Driver Analysis</h2>
<section id="materials-applications-to-run-key-drivers" class="level3" data-number="2.2.1">
<h3 data-number="2.2.1" class="anchored" data-anchor-id="materials-applications-to-run-key-drivers"><span class="header-section-number">2.2.1</span> Materials &amp; Applications to run Key Drivers</h3>
<p>The Key Driver analysis has been automated to run in SMart, see section 8, Analyses: Key Driver (Relative Weights) Analysis for further information. However, we still occasionally run Key Drivers manually in R via the SMG package using the <code>key_driver()</code> function.</p>
</section>
<section id="pull-the-data" class="level3" data-number="2.2.2">
<h3 data-number="2.2.2" class="anchored" data-anchor-id="pull-the-data"><span class="header-section-number">2.2.2</span> Pull the data</h3>
<p>For this example we are going to use data from United Dairy Farms. To pull the data directly from SQL we use the following syntax:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(papeR)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>connection <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="fu">odbc</span>(),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">Driver =</span> <span class="st">"SQL Server"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">Server =</span> <span class="st">"SRV_INT_TRANS</span><span class="sc">\\</span><span class="st">SMGTRANS"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">Trusted_Connection =</span> <span class="st">"True"</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>udf_csi_kd <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(connection,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="st">"SELECT </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[UID], </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[R000005], </span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[R000017], </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[R000018], </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[R000020], </span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[R000022], </span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Calls.[R000029]</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="st">FROM </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="st">edify.dbo.UDF_CSI_Calls WITH (NOLOCK)  </span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="st">INNER JOIN structures.dbo.UDF_CSI_Store_Info WITH (NOLOCK) ON UDF_CSI_Calls.[StoreId] = UDF_CSI_Store_Info.[StoreId] </span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE </span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="st">UDF_CSI_Store_Info.[IN_CSI] = -1 AND UDF_CSI_Store_Info.[TEST_STORE] = 0</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="st">AND UDF_CSI_Calls.[Date_Time] BETWEEN '2022-01-01 12:00:00 AM' AND '2022-12-31 11:59:59 PM'</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="st">AND UDF_CSI_Calls.[TERM] IN ('OK', 'WebOK')"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>In this case we only pull the variables that we need for the analysis.</p>
</section>
<section id="prepare-data" class="level3" data-number="2.2.3">
<h3 data-number="2.2.3" class="anchored" data-anchor-id="prepare-data"><span class="header-section-number">2.2.3</span> Prepare data</h3>
<p>In order to get the data into the right format, it is important to perform the following steps:</p>
<ul>
<li><p>Select only the variables that we are going to use including OSAT and the explanatory variables (make sure OSAT is the first variable in the dataset)</p></li>
<li><p>Keep only complete cases</p></li>
<li><p>Filter OSAT so it only includes 4s and 5s</p></li>
</ul>
<p>-Convert 4s into 0s and 5s into 1s</p>
<p>All those steps can be performed in a single run of code using the tidyverse like this:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>udf_csi_kd <span class="ot">&lt;-</span> udf_csi_kd<span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>UID)<span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_all</span>(<span class="fu">all_vars</span>(.<span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))<span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(R000005 <span class="sc">%in%</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>)<span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">R000005 =</span> <span class="fu">case_when</span>(R000005 <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="dv">0</span>, R000005 <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="get-correlations" class="level3" data-number="2.2.4">
<h3 data-number="2.2.4" class="anchored" data-anchor-id="get-correlations"><span class="header-section-number">2.2.4</span> Get correlations</h3>
<p>The easiest way to run simple correlations between the data is using the following code:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>udf_csi_kd<span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          R000005   R000017   R000018   R000020   R000022   R000029
R000005 1.0000000 0.5833673 0.5206141 0.5725330 0.5933566 0.5278057
R000017 0.5833673 1.0000000 0.5553600 0.6268914 0.6799234 0.5358979
R000018 0.5206141 0.5553600 1.0000000 0.5502581 0.5876474 0.5350537
R000020 0.5725330 0.6268914 0.5502581 1.0000000 0.7743361 0.4975037
R000022 0.5933566 0.6799234 0.5876474 0.7743361 1.0000000 0.5410453
R000029 0.5278057 0.5358979 0.5350537 0.4975037 0.5410453 1.0000000</code></pre>
</div>
</div>
</section>
<section id="get-descriptives" class="level3" data-number="2.2.5">
<h3 data-number="2.2.5" class="anchored" data-anchor-id="get-descriptives"><span class="header-section-number">2.2.5</span> Get descriptives</h3>
</section>
<section id="run-key-drivers-function" class="level3" data-number="2.2.6">
<h3 data-number="2.2.6" class="anchored" data-anchor-id="run-key-drivers-function"><span class="header-section-number">2.2.6</span> Run key drivers function</h3>
<p>The key drivers function is built so it only needs two main inputs, the dataset itself and the name of the project. Once all the previous steps have been performed, you can easily run the model with these lines of code</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>udf_kd_model <span class="ot">&lt;-</span> udf_csi_kd<span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">key_drivers</span>(<span class="st">"UDF_CSI"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="interpreting-the-key-driver-results" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="interpreting-the-key-driver-results"><span class="header-section-number">2.3</span> Interpreting the Key Driver Results</h2>
<section id="overview-1" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="overview-1"><span class="header-section-number">2.3.1</span> Overview</h3>
<p>The rescaled percentages in the output can be interpreted as the relative importance in moving 4’s to 5’s on OSAT for each of the measures, with the benefit of being able to sum the percentages into categories. The 3 categories are Service, Product, Environment. See the “Building a Key Driver Model” portion of this section for more info on the categories as well as what constitutes a good Key Driver model.</p>
</section>
<section id="reading-the-output---correlations" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="reading-the-output---correlations"><span class="header-section-number">2.3.2</span> Reading the Output - Correlations</h3>
<p>If you ran the dropdown version of the syntax, as seen below, there is no formatting to your correlation table and it isn’t filtered to OSAT 4’s and 5’s. The Syntax version has formatting to match the SMart correlation table as well as the filter. Both work, the correlation table is to keep an eye on multicollinearity. Try to keep the correlations above .300 and below .800.</p>
<p>If you want to visualize the correlations in a more redable way, we recommend using corrplot like this:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>udf_csi_kd<span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()<span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">corrplot</span>(<span class="st">"number"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="key_drivers_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="reading-the-output---descriptives" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="reading-the-output---descriptives"><span class="header-section-number">2.3.3</span> Reading the Output - Descriptives</h3>
<p>The Descriptives command gives you a quick high-level look at the R variables included in the analysis, you can check this to see if any of them have extremely low sample. We strive to keep 80% of the response base to keep the model representative.</p>
</section>
<section id="reading-the-output-relative-weights-r" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="reading-the-output-relative-weights-r"><span class="header-section-number">2.3.4</span> Reading the Output – Relative Weights &amp; R</h3>
<p>Extracting the results from the object we just created is fairly easy, you can simply enter the name of the object into the console (<code>udf_kd_model</code> in this case).</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>udf_kd_model</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
  Variable Names            Variable Labels Raw Weights (epsilon)
1        R000017                      Speed            0.11317217
2        R000029   Availability of Products            0.10341414
3        R000022 Attentiveness of Associate            0.10187778
4        R000020  Friendliness of Associate            0.09723517
5        R000018       Exterior Cleanliness            0.09191880
  Rescaled Weights p Value
1        0.2229475       0
2        0.2037243       0
3        0.2006977       0
4        0.1915518       0
5        0.1810787       0

[[2]]
     R Squared Sample Size
[1,] 0.5076181       26151</code></pre>
</div>
</div>
<p>Also, if you want to see the tables specifically so you can paste them somewhere else, you can use the <code>gt</code> package like this:</p>
<p>These two tables give you the data needed to populate the Key Driver slide. You will use the Rescaled Weights from the far left column, which sum to 100%, in the Key Driver graph. In addition, your R2 is included in the last data table, the average R2 is .4 across clients. The R2 tells us how much variance in OSAT is explained by the metrics included in our model. We go more in depth on this topic in the Building Key Driver Models portion of this section. Lastly, your N count is included in the final table as well.</p>
<p>Research usually pastes the results into an excel, and sorts the variables based on the Rescaled Weights column.</p>
</section>
</section>
<section id="building-a-key-driver-model" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="building-a-key-driver-model"><span class="header-section-number">2.4</span> Building a Key Driver Model</h2>
<section id="overview-2" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="overview-2"><span class="header-section-number">2.4.1</span> Overview</h3>
<p>Building a Key Driver model is a bit like combining Science and Art. We have standard guidelines on how to build a model, but it takes understanding the client &amp; industry as well statistical rigor to have a solid finished product. There are four steps to building a KD model: conceptualizing the model, sample considerations, choosing the measures, and validating. This portion of the training manual will walk through each of those steps. Our final goal is to have a “good” key driver model.</p>
<p><em>What are the characteristics of a good key driver model?</em></p>
<ul>
<li><p><strong>Balanced:</strong> There should be an equal number of similar questions</p></li>
<li><p><strong>Descriptive:</strong> Questions that provide clear indication of what is measured</p></li>
<li><p><strong>Actionable:</strong> Questions that provide direction on what to change</p></li>
<li><p><strong>Unique:</strong> Questions that are not highly correlated with other questions in the model</p></li>
<li><p><strong>Predictive:</strong> Questions that have a meaningful impact on Overall Satisfaction</p></li>
<li><p><strong>Representative:</strong> The model should represent the intended customer base</p></li>
</ul>
</section>
<section id="step-1-conceptualizing-the-kd-model" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="step-1-conceptualizing-the-kd-model"><span class="header-section-number">2.4.2</span> Step 1: Conceptualizing the KD Model</h3>
<ul>
<li><p>Understand the Client’s Business:</p>
<ul>
<li><p>Talk to the account manager on the client to get an idea of what the business is and who goes there, in addition, taking the time to google the client on the internet to get an idea what the physical properties of the units look like can be useful too.</p></li>
<li><p>In addition, use the survey script in order to get a list of all satisfaction measures asked of respondents for your potential KD model. We only use 5-scale questions in key driver models. Also, pay attention to logic used in asking questions – we want to include measures that are asked of the majority of respondents (~80% of total respondents) to keep the model representative. An example would be Cleanliness of Restroom, it’s only asked of those who use the restroom which is typically less than half of respondents.</p></li>
</ul></li>
<li><p>Building a Balanced Model:</p></li>
<li><p>KD Measures usually fall into one of three larger themes: Product, Service (sometimes called People), and Environment. Product related measures are typically like taste of food, or quality of merchandise. Service related measures are typically like Friendliness or Availability of Assistance. Environment measures are the least frequent and are typically like Cleanliness or Ease of Moving through Store. We try to not have too many drivers falling under one theme to keep a balance. This can be assessed by a simple count of measures under each theme or by adding the rescaled weights to get a picture of how influential that theme is.</p></li>
</ul>
</section>
<section id="step-2-sample-considerations" class="level3" data-number="2.4.3">
<h3 data-number="2.4.3" class="anchored" data-anchor-id="step-2-sample-considerations"><span class="header-section-number">2.4.3</span> Step 2: Sample Considerations</h3>
<ul>
<li><p>Key Driver models should have a total sample count of at least 1,000 responses</p>
<ul>
<li><p>A secondary threshold of 100 responses per question asked can be applied to models that fail the initial sample requirement</p></li>
<li><p>As we look at only 4’s and 5’s, you’ll want your client to ideally have around 1,500 responses before you run a model</p></li>
</ul></li>
<li><p>Keep sample in mind when choosing which measures to include</p>
<ul>
<li><p>If a question isn’t asked of everyone, it could drastically cut down on sample and may not be representative of the experience</p></li>
<li><p>If it’s important to include a measure that has logic, consider whether it makes sense to have more than one model for the business. This is common for different lines of business within a retail client (ex. buy online and pick up in store) or dine type for restaurant clients.</p></li>
<li><p>Try and keep the model representative with 80% of respondents included if a question with logic is included in the model</p></li>
</ul></li>
</ul>
</section>
<section id="step-3-choosing-measures" class="level3" data-number="2.4.4">
<h3 data-number="2.4.4" class="anchored" data-anchor-id="step-3-choosing-measures"><span class="header-section-number">2.4.4</span> Step 3: Choosing Measures</h3>
<ul>
<li><p>Ideally, your model would include at least 5 measures and less than 10 measures. Not all possibly key driver metrics need to be included in the model.</p></li>
<li><p>After conceptualizing the model and choosing measures to possibly include, check for high correlations across measures</p>
<ul>
<li>Measures should not be included if they are correlated at .8 or higher with another measure</li>
</ul></li>
<li><p>Are all measures actionable at the unit level?</p>
<ul>
<li><p>Try to make sure your final model has mostly actionable measures. If the unit level user does not have control over the measure, like Variety of Menu, possibly consider not including it in the model.</p></li>
<li><p>If the measure is important to the model and the brand, consider removing Variety of Menu from the AFFs for your client. See Section 9: Areas for Focus for more information on this topic.</p></li>
</ul></li>
<li><p>You may need to swap out measures if they are highly correlated to determine which measure should be included in the model</p>
<ul>
<li><p>Keep in mind actionability, balancing the model, what is important to the client, etc.</p></li>
<li><p>Discuss alternative models with your team if there are measures that could be swapped out for one another</p></li>
</ul></li>
<li><p>Be able to provide a recommendation to your team and be able to explain why measures were either added or removed.</p>
<ul>
<li>Documentation is important, consider saving the multiple models you run before your final into an excel with descriptions of why you choose to add/remove measures</li>
</ul></li>
<li><p>Do not include outcome measures such as Overall Value, Return or Recommend in your model.</p></li>
</ul>
</section>
<section id="step-4-validating" class="level3" data-number="2.4.5">
<h3 data-number="2.4.5" class="anchored" data-anchor-id="step-4-validating"><span class="header-section-number">2.4.5</span> Step 4: Validating</h3>
<ul>
<li><p>After checking for multi-collinearity across measures, run the analysis to assess the strength of the model</p>
<ul>
<li><p>R-squared averages around .4 and is used to explain how much variation in moving 4s to 5s is explained by the measures included. We aim for an R-squared of .5</p></li>
<li><p>Models at or below .3 should be investigated to understand if measures should be added/removed in order to bring the model in with best practices</p></li>
</ul></li>
<li><p>Check the sample size to ensure that the model has been run correctly (should match a list-wise correlation table filtered for 4s and 5s)</p></li>
<li><p>Make sure the top drivers make sense for what you would expect for the client’s business</p></li>
<li><p>When creating a key driver model, it is useful to also run a Rewards and Penalties model to see how they compare. We’ll cover how to run Rewards and Penalties next.</p>
<ul>
<li><p>Top drivers are not always the biggest penalties or rewards, but should still be important in the model</p></li>
<li><p>Key driver models usually differ from the Rewards and Penalties model. A Rewards and Penalties model shows which measures provide the biggest penalties and which measures provide the biggest rewards.</p></li>
<li><p>The model uses either linear or relative-weights linear regression to look at how variation in Overall Satisfaction is explained by either scoring top box or bottom 3 box on a measure</p></li>
</ul></li>
</ul>
</section>
<section id="final-notes" class="level3" data-number="2.4.6">
<h3 data-number="2.4.6" class="anchored" data-anchor-id="final-notes"><span class="header-section-number">2.4.6</span> Final Notes</h3>
<p>We try to have only one KD model per client, but occasionally it makes sense to have alternative or additional models. One example could be Drive-thru vs Dine In for restaurants. Or, another example for retail could be Buy Online/Pick Up in Store Shoppers vs Regular Shoppers. The same criteria apply to a filtered key driver model as to the overall model. It is easy to run into low n counts or a weak R squared in these alternative models. If the model cannot stand on its own, it should not be shown to a client.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./correlations.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Correlations</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./quick_r_tips.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Quick R tips</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>