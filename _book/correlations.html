<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R Handbook for Research - 1&nbsp; Correlations</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./key_drivers.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.27/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Correlations</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Handbook for Research</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Preface</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./correlations.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Correlations</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./key_drivers.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Key Drivers models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./quick_r_tips.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Quick R tips</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">References</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#matrix-of-correlations" id="toc-matrix-of-correlations" class="nav-link active" data-scroll-target="#matrix-of-correlations"><span class="toc-section-number">1.1</span>  Matrix of correlations</a></li>
  <li><a href="#corrplot" id="toc-corrplot" class="nav-link" data-scroll-target="#corrplot"><span class="toc-section-number">1.2</span>  Corrplot</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Correlations</span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<blockquote class="blockquote">
<p>For this example we are going to use some NAPA_PSHIP data, if you want to replicate the analyses, you can pull the data using the hiden code</p>
</blockquote>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'odbc'</span>, <span class="st">'dplyr'</span>, <span class="st">'tidyr'</span>, <span class="st">'expss'</span>, <span class="st">'data.table'</span>, <span class="st">'RPostgres'</span>, <span class="st">'car'</span>, <span class="st">'purrr'</span>, <span class="st">'stringr'</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">length</span>(<span class="fu">setdiff</span>(packages, <span class="fu">rownames</span>(<span class="fu">installed.packages</span>()))) <span class="sc">&gt;</span> <span class="dv">0</span>) </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>{<span class="fu">install.packages</span>(<span class="fu">setdiff</span>(packages, <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())))} </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(odbc)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RPostgres)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(expss)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>connection <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">odbc</span>(), </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">Driver =</span> <span class="st">'SQL Server'</span>, </span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">Server =</span> <span class="st">'SRV_INT_TRANS</span><span class="sc">\\</span><span class="st">SMGTRANS'</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">Trusted_Connection =</span> <span class="st">'True'</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>rpt_connection <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">odbc</span>(), </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">Driver =</span> <span class="st">'SQL Server'</span>, </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">Server =</span> <span class="st">'SRV_INT_REPORT</span><span class="sc">\\</span><span class="st">SMGREPORT'</span>,</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">Trusted_Connection =</span> <span class="st">'True'</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>cx_query <span class="ot">&lt;-</span> <span class="st">"</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="st">SELECT </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="st">*</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="st">FROM </span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="st">edify.dbo.NAPA_PSHIP_Calls WITH (NOLOCK)  </span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="st">INNER JOIN structures.dbo.NAPA_PSHIP_Store_Info WITH (NOLOCK) ON NAPA_PSHIP_Calls.[StoreId] = NAPA_PSHIP_Store_Info.[StoreId] </span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE </span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="st">NAPA_PSHIP_Calls.[VisitDate] BETWEEN '2023-01-01 12:00:00 AM' AND '2023-10-31 11:59:59 PM'</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="st">AND NAPA_PSHIP_Calls.[TERM] IN ('WebOK', 'OK')</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="st">AND NAPA_PSHIP_Store_Info.[IN_CSI] = -1</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="st">AND NAPA_PSHIP_Store_Info.[TEST_STORE] = 0</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="st">"</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>cx_data <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(connection, cx_query)</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="co">#keep original names to reference later </span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>original_names <span class="ot">&lt;-</span> <span class="fu">names</span>(cx_data)</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="co">#custom recodes and calculations</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a><span class="co">#custom recode options</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="co">#custom calculations</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>labels_query <span class="ot">&lt;-</span> <span class="st">"</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a><span class="st">SELECT  </span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a><span class="st">Survey.[name], </span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a><span class="st">Question.[question_id],</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a><span class="st">Question.[number],</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a><span class="st">Question.[fns_unique_id], </span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a><span class="st">Question_text.[question_text], </span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="st">Question_text.[name] as ShortText, </span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a><span class="st">Question_text.[last_modified_date], </span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a><span class="st">AnswerGroupValue.[answer_group_value], </span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a><span class="st">Answer_Text.Answer_Text</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a><span class="st">FROM </span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a><span class="st">SMG_Reporting.dbo.Survey WITH (NOLOCK)</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a><span class="st">JOIN SMG_Reporting.dbo.Question WITH (NOLOCK) ON Survey.[survey_id] = Question.[survey_id]</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a><span class="st">JOIN SMG_Reporting.dbo.question_text WITH (NOLOCK) ON Question.[question_id] = Question_text.[question_id]</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a><span class="st">JOIN SMG_Reporting.dbo.AnswerGroupValue WITH (NOLOCK) ON Question.[answer_group_id] = AnswerGroupValue.[answer_group_id]</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a><span class="st">JOIN SMG_Reporting.dbo.Answer_Text WITH (NOLOCK) ON AnswerGroupValue.[answer_group_value_id] = Answer_Text.[answer_group_value_id]</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE </span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a><span class="st">(Answer_Text.[language_id] = 3 and Question_text.[language_id] = 3) </span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="st">AND Survey.[name] = 'NAPA_PSHIP'</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a><span class="st">ORDER BY Question_text.[last_modified_date] desc</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a><span class="st">"</span></span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>labels_data <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(rpt_connection, labels_query)</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a><span class="co">#assign variable labels</span></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(original_names)){</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tryCatch</span>({</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>    this_var <span class="ot">&lt;-</span> original_names[i]</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    this_var_label <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'[^[:alnum:][:space:]]'</span>, <span class="st">''</span>, (<span class="fu">subset</span>(labels_data, labels_data<span class="sc">$</span>number <span class="sc">==</span> this_var)<span class="sc">$</span>ShortText)[<span class="dv">1</span>])</span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    this_var_label <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">' '</span>, <span class="st">'_'</span>, this_var_label)</span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    new_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(this_var, <span class="st">'_'</span>, this_var_label)</span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    this_qtext <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'[^[:alnum:][:space:]]'</span>, <span class="st">''</span>, (<span class="fu">subset</span>(labels_data, labels_data<span class="sc">$</span>number <span class="sc">==</span> this_var)<span class="sc">$</span>question_text)[<span class="dv">1</span>])</span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>    this_qtext <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">' '</span>, <span class="st">'_'</span>, this_qtext)</span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>    columns_which_contain_this_var <span class="ot">&lt;-</span> <span class="fu">names</span>(cx_data)[<span class="fu">grepl</span>(this_var, <span class="fu">names</span>(cx_data), <span class="at">fixed=</span><span class="cn">TRUE</span>)]</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">names</span>(cx_data) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(this_var, new_name, <span class="fu">names</span>(cx_data))</span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>  }, <span class="at">error=</span><span class="cf">function</span>(e){})</span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(cx_data) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">'_NA'</span>, <span class="st">''</span>, <span class="fu">names</span>(cx_data))</span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a><span class="co">#remove columns that are entirely NA</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>cx_data <span class="ot">&lt;-</span> cx_data[,<span class="fu">colSums</span>(<span class="fu">is.na</span>(cx_data))<span class="sc">&lt;</span><span class="fu">nrow</span>(cx_data)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Inside R, there are multiple ways to run correlations, some from Base R and some from other very useful external packages.</p>
<p>The easiest way to compute a correlation between two variables is to use the <code>cor.test</code> function from the <code>stats</code> package which is automatically loaded in any R session. This function takes as input two vectors of the same size and it assumes they are both ordered in the same way, meaning that row 1 in the first vector corresponds to row 1 in the second vector.</p>
<p>So, to extract the vectors from an existing data frame, we would use the <code>$</code> operator like this <code>cx_data$var1</code>. Putting it inside the function would look something like this:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(cx_data<span class="sc">$</span>R003000_Overall_Satisfaction, cx_data<span class="sc">$</span>R000007_Order_Accuracy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  cx_data$R003000_Overall_Satisfaction and cx_data$R000007_Order_Accuracy
t = 49.517, df = 4765, p-value &lt; 2.2e-16
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.5638217 0.6013193
sample estimates:
      cor 
0.5828808 </code></pre>
</div>
</div>
<p>When you run it just like that, by default it will give you the text based results that you can see above. However, if you want to use the results later, it might be useful to store them in a data frame. To do so, the <code>tidy()</code> function from the <code>broom</code> package can be handy.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>cor_result <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(cx_data<span class="sc">$</span>R003000_Overall_Satisfaction, cx_data<span class="sc">$</span>R000007_Order_Accuracy)<span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(cor_result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-ed5a3c84273c75ed61d3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ed5a3c84273c75ed61d3">{"x":{"filter":"none","vertical":false,"data":[["1"],[0.582880760874964],[49.5173006953935],[0],[4765],[0.56382174735483],[0.601319293977316],["Pearson's product-moment correlation"],["two.sided"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>estimate<\/th>\n      <th>statistic<\/th>\n      <th>p.value<\/th>\n      <th>parameter<\/th>\n      <th>conf.low<\/th>\n      <th>conf.high<\/th>\n      <th>method<\/th>\n      <th>alternative<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[1,2,3,4,5,6]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>This way, you could export the data frame into an excel using <code>openxlsx</code> or to an HTML table using <code>gt()</code> or <code>datatable()</code> from the <code>DT</code> package.</p>
<section id="matrix-of-correlations" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="matrix-of-correlations"><span class="header-section-number">1.1</span> Matrix of correlations</h2>
<p>However, if you are trying to see the correlations between multiple variables, the <code>cor.test()</code> function might not be the best choice for you. Rather, the easiest way to compute a correlation matrix is using the <code>cor()</code> function also from the <code>stats</code> package. This function takes an input a numerical data frame, meaning that we first need to filter out for just the variables we want to analyze. Fortunately, using the base R (<code>|&gt;</code>) or the tidyverse pipe (<code>%&gt;%</code>) makes it easy enough. You can do something like this:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a> cx_data<span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(R003000_Overall_Satisfaction<span class="sc">:</span>R000012_Overall_Value)<span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()<span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                                     R003000_Overall_Satisfaction
R003000_Overall_Satisfaction                            1.0000000
R000003_Delivery_Time                                   0.5961212
R000004_Delivery_Driver_Friendliness                    0.1021728
R000005_Product_Description                             0.5769551
R000006_Product_Images                                  0.5340010
R000007_Order_Accuracy                                  0.5827870
R000009_Ease_of_NavigatingPA_PROLink                    0.6142104
R000010_Ease_of_Placing_Order                           0.6317569
R000011_Stock_Availability_Accuracy                     0.5970378
R000012_Overall_Value                                   0.5641530
                                     R000003_Delivery_Time
R003000_Overall_Satisfaction                     0.5961212
R000003_Delivery_Time                            1.0000000
R000004_Delivery_Driver_Friendliness             0.1383463
R000005_Product_Description                      0.4930749
R000006_Product_Images                           0.4842543
R000007_Order_Accuracy                           0.6145661
R000009_Ease_of_NavigatingPA_PROLink             0.3699018
R000010_Ease_of_Placing_Order                    0.4581992
R000011_Stock_Availability_Accuracy              0.6251557
R000012_Overall_Value                            0.5202923
                                     R000004_Delivery_Driver_Friendliness
R003000_Overall_Satisfaction                                   0.10217282
R000003_Delivery_Time                                          0.13834625
R000004_Delivery_Driver_Friendliness                           1.00000000
R000005_Product_Description                                    0.13776047
R000006_Product_Images                                         0.14625946
R000007_Order_Accuracy                                         0.16959359
R000009_Ease_of_NavigatingPA_PROLink                           0.08943948
R000010_Ease_of_Placing_Order                                  0.12954312
R000011_Stock_Availability_Accuracy                            0.13952907
R000012_Overall_Value                                          0.11844941
                                     R000005_Product_Description
R003000_Overall_Satisfaction                           0.5769551
R000003_Delivery_Time                                  0.4930749
R000004_Delivery_Driver_Friendliness                   0.1377605
R000005_Product_Description                            1.0000000
R000006_Product_Images                                 0.7736078
R000007_Order_Accuracy                                 0.6509746
R000009_Ease_of_NavigatingPA_PROLink                   0.5634418
R000010_Ease_of_Placing_Order                          0.5900835
R000011_Stock_Availability_Accuracy                    0.6111687
R000012_Overall_Value                                  0.5652662
                                     R000006_Product_Images
R003000_Overall_Satisfaction                      0.5340010
R000003_Delivery_Time                             0.4842543
R000004_Delivery_Driver_Friendliness              0.1462595
R000005_Product_Description                       0.7736078
R000006_Product_Images                            1.0000000
R000007_Order_Accuracy                            0.6305591
R000009_Ease_of_NavigatingPA_PROLink              0.5460741
R000010_Ease_of_Placing_Order                     0.5747142
R000011_Stock_Availability_Accuracy               0.5879939
R000012_Overall_Value                             0.5502345
                                     R000007_Order_Accuracy
R003000_Overall_Satisfaction                      0.5827870
R000003_Delivery_Time                             0.6145661
R000004_Delivery_Driver_Friendliness              0.1695936
R000005_Product_Description                       0.6509746
R000006_Product_Images                            0.6305591
R000007_Order_Accuracy                            1.0000000
R000009_Ease_of_NavigatingPA_PROLink              0.4539392
R000010_Ease_of_Placing_Order                     0.5399908
R000011_Stock_Availability_Accuracy               0.6453447
R000012_Overall_Value                             0.5236993
                                     R000009_Ease_of_NavigatingPA_PROLink
R003000_Overall_Satisfaction                                   0.61421040
R000003_Delivery_Time                                          0.36990183
R000004_Delivery_Driver_Friendliness                           0.08943948
R000005_Product_Description                                    0.56344180
R000006_Product_Images                                         0.54607410
R000007_Order_Accuracy                                         0.45393918
R000009_Ease_of_NavigatingPA_PROLink                           1.00000000
R000010_Ease_of_Placing_Order                                  0.71653113
R000011_Stock_Availability_Accuracy                            0.47663870
R000012_Overall_Value                                          0.50967315
                                     R000010_Ease_of_Placing_Order
R003000_Overall_Satisfaction                             0.6317569
R000003_Delivery_Time                                    0.4581992
R000004_Delivery_Driver_Friendliness                     0.1295431
R000005_Product_Description                              0.5900835
R000006_Product_Images                                   0.5747142
R000007_Order_Accuracy                                   0.5399908
R000009_Ease_of_NavigatingPA_PROLink                     0.7165311
R000010_Ease_of_Placing_Order                            1.0000000
R000011_Stock_Availability_Accuracy                      0.5206984
R000012_Overall_Value                                    0.5128571
                                     R000011_Stock_Availability_Accuracy
R003000_Overall_Satisfaction                                   0.5970378
R000003_Delivery_Time                                          0.6251557
R000004_Delivery_Driver_Friendliness                           0.1395291
R000005_Product_Description                                    0.6111687
R000006_Product_Images                                         0.5879939
R000007_Order_Accuracy                                         0.6453447
R000009_Ease_of_NavigatingPA_PROLink                           0.4766387
R000010_Ease_of_Placing_Order                                  0.5206984
R000011_Stock_Availability_Accuracy                            1.0000000
R000012_Overall_Value                                          0.5794517
                                     R000012_Overall_Value
R003000_Overall_Satisfaction                     0.5641530
R000003_Delivery_Time                            0.5202923
R000004_Delivery_Driver_Friendliness             0.1184494
R000005_Product_Description                      0.5652662
R000006_Product_Images                           0.5502345
R000007_Order_Accuracy                           0.5236993
R000009_Ease_of_NavigatingPA_PROLink             0.5096731
R000010_Ease_of_Placing_Order                    0.5128571
R000011_Stock_Availability_Accuracy              0.5794517
R000012_Overall_Value                            1.0000000</code></pre>
</div>
</div>
<p>The only things we did was selecting the variables we wanted and then making sure that there were no NA values in them by droping any row with NAs. However, if you want to do correlations using pariwise complete observations, you can adjust that inside the <code>cor()</code> call like this: <code>cor(data, use = "pairwise.complete.obs")</code>, if you want to check what other options are available, you can always use <code>?cor</code> to display the documentation of the given function.</p>
<p>This is a very easy way to compute a correlation matrix, but it has two main issues that we can address using additional steps from other packages. The first issue is that again, it is not very readable nor exportable. The simplest fix is to transform the matrix that the function outputs into a data frame keeping the row names. To do so, we use the base R <code>as.data.frame()</code> and <code>rownames_to_column()</code> from the tibble package.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>correlation_matrix_cx <span class="ot">&lt;-</span> cx_data<span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(R003000_Overall_Satisfaction<span class="sc">:</span>R000012_Overall_Value)<span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()<span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()<span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>()<span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  tibble<span class="sc">::</span><span class="fu">rownames_to_column</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Once we have it like that we can go ahead and export in whatever way we prefer. For example, if we want to use an HTML output, we can color code the results directly from the <code>gt</code> package set of functions, doing something like this:</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>correlation_matrix_cx<span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>(<span class="at">rowname_col =</span> <span class="st">"rowname"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style_body</span>(<span class="at">columns =</span> <span class="fu">starts_with</span>(<span class="st">"R0"</span>),<span class="at">fn =</span> <span class="cf">function</span>(x) <span class="fu">between</span>(x, .<span class="dv">7</span>, .<span class="dv">99</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">color =</span> <span class="st">'red'</span>, <span class="at">weight =</span> <span class="st">'bold'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div id="nehvnbtwrw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#nehvnbtwrw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#nehvnbtwrw thead, #nehvnbtwrw tbody, #nehvnbtwrw tfoot, #nehvnbtwrw tr, #nehvnbtwrw td, #nehvnbtwrw th {
  border-style: none;
}

#nehvnbtwrw p {
  margin: 0;
  padding: 0;
}

#nehvnbtwrw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#nehvnbtwrw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#nehvnbtwrw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#nehvnbtwrw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#nehvnbtwrw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nehvnbtwrw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nehvnbtwrw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#nehvnbtwrw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#nehvnbtwrw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#nehvnbtwrw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#nehvnbtwrw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#nehvnbtwrw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#nehvnbtwrw .gt_spanner_row {
  border-bottom-style: hidden;
}

#nehvnbtwrw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#nehvnbtwrw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#nehvnbtwrw .gt_from_md > :first-child {
  margin-top: 0;
}

#nehvnbtwrw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#nehvnbtwrw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#nehvnbtwrw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#nehvnbtwrw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#nehvnbtwrw .gt_row_group_first td {
  border-top-width: 2px;
}

#nehvnbtwrw .gt_row_group_first th {
  border-top-width: 2px;
}

#nehvnbtwrw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nehvnbtwrw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#nehvnbtwrw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#nehvnbtwrw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nehvnbtwrw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#nehvnbtwrw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#nehvnbtwrw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#nehvnbtwrw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#nehvnbtwrw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#nehvnbtwrw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nehvnbtwrw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nehvnbtwrw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#nehvnbtwrw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#nehvnbtwrw .gt_left {
  text-align: left;
}

#nehvnbtwrw .gt_center {
  text-align: center;
}

#nehvnbtwrw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#nehvnbtwrw .gt_font_normal {
  font-weight: normal;
}

#nehvnbtwrw .gt_font_bold {
  font-weight: bold;
}

#nehvnbtwrw .gt_font_italic {
  font-style: italic;
}

#nehvnbtwrw .gt_super {
  font-size: 65%;
}

#nehvnbtwrw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#nehvnbtwrw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#nehvnbtwrw .gt_indent_1 {
  text-indent: 5px;
}

#nehvnbtwrw .gt_indent_2 {
  text-indent: 10px;
}

#nehvnbtwrw .gt_indent_3 {
  text-indent: 15px;
}

#nehvnbtwrw .gt_indent_4 {
  text-indent: 20px;
}

#nehvnbtwrw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id=""></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R003000_Overall_Satisfaction">R003000_Overall_Satisfaction</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000003_Delivery_Time">R000003_Delivery_Time</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000004_Delivery_Driver_Friendliness">R000004_Delivery_Driver_Friendliness</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000005_Product_Description">R000005_Product_Description</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000006_Product_Images">R000006_Product_Images</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000007_Order_Accuracy">R000007_Order_Accuracy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000009_Ease_of_NavigatingPA_PROLink">R000009_Ease_of_NavigatingPA_PROLink</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000010_Ease_of_Placing_Order">R000010_Ease_of_Placing_Order</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000011_Stock_Availability_Accuracy">R000011_Stock_Availability_Accuracy</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="R000012_Overall_Value">R000012_Overall_Value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><th id="stub_1_1" scope="row" class="gt_row gt_left gt_stub">R003000_Overall_Satisfaction</th>
<td headers="stub_1_1 R003000_Overall_Satisfaction" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_1 R000003_Delivery_Time" class="gt_row gt_right">0.5961212</td>
<td headers="stub_1_1 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.10217282</td>
<td headers="stub_1_1 R000005_Product_Description" class="gt_row gt_right">0.5769551</td>
<td headers="stub_1_1 R000006_Product_Images" class="gt_row gt_right">0.5340010</td>
<td headers="stub_1_1 R000007_Order_Accuracy" class="gt_row gt_right">0.5827870</td>
<td headers="stub_1_1 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.61421040</td>
<td headers="stub_1_1 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.6317569</td>
<td headers="stub_1_1 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.5970378</td>
<td headers="stub_1_1 R000012_Overall_Value" class="gt_row gt_right">0.5641530</td></tr>
    <tr><th id="stub_1_2" scope="row" class="gt_row gt_left gt_stub">R000003_Delivery_Time</th>
<td headers="stub_1_2 R003000_Overall_Satisfaction" class="gt_row gt_right">0.5961212</td>
<td headers="stub_1_2 R000003_Delivery_Time" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_2 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.13834625</td>
<td headers="stub_1_2 R000005_Product_Description" class="gt_row gt_right">0.4930749</td>
<td headers="stub_1_2 R000006_Product_Images" class="gt_row gt_right">0.4842543</td>
<td headers="stub_1_2 R000007_Order_Accuracy" class="gt_row gt_right">0.6145661</td>
<td headers="stub_1_2 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.36990183</td>
<td headers="stub_1_2 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.4581992</td>
<td headers="stub_1_2 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.6251557</td>
<td headers="stub_1_2 R000012_Overall_Value" class="gt_row gt_right">0.5202923</td></tr>
    <tr><th id="stub_1_3" scope="row" class="gt_row gt_left gt_stub">R000004_Delivery_Driver_Friendliness</th>
<td headers="stub_1_3 R003000_Overall_Satisfaction" class="gt_row gt_right">0.1021728</td>
<td headers="stub_1_3 R000003_Delivery_Time" class="gt_row gt_right">0.1383463</td>
<td headers="stub_1_3 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">1.00000000</td>
<td headers="stub_1_3 R000005_Product_Description" class="gt_row gt_right">0.1377605</td>
<td headers="stub_1_3 R000006_Product_Images" class="gt_row gt_right">0.1462595</td>
<td headers="stub_1_3 R000007_Order_Accuracy" class="gt_row gt_right">0.1695936</td>
<td headers="stub_1_3 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.08943948</td>
<td headers="stub_1_3 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.1295431</td>
<td headers="stub_1_3 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.1395291</td>
<td headers="stub_1_3 R000012_Overall_Value" class="gt_row gt_right">0.1184494</td></tr>
    <tr><th id="stub_1_4" scope="row" class="gt_row gt_left gt_stub">R000005_Product_Description</th>
<td headers="stub_1_4 R003000_Overall_Satisfaction" class="gt_row gt_right">0.5769551</td>
<td headers="stub_1_4 R000003_Delivery_Time" class="gt_row gt_right">0.4930749</td>
<td headers="stub_1_4 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.13776047</td>
<td headers="stub_1_4 R000005_Product_Description" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_4 R000006_Product_Images" class="gt_row gt_right" style="color: #FF0000; font-weight: bold;">0.7736078</td>
<td headers="stub_1_4 R000007_Order_Accuracy" class="gt_row gt_right">0.6509746</td>
<td headers="stub_1_4 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.56344180</td>
<td headers="stub_1_4 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.5900835</td>
<td headers="stub_1_4 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.6111687</td>
<td headers="stub_1_4 R000012_Overall_Value" class="gt_row gt_right">0.5652662</td></tr>
    <tr><th id="stub_1_5" scope="row" class="gt_row gt_left gt_stub">R000006_Product_Images</th>
<td headers="stub_1_5 R003000_Overall_Satisfaction" class="gt_row gt_right">0.5340010</td>
<td headers="stub_1_5 R000003_Delivery_Time" class="gt_row gt_right">0.4842543</td>
<td headers="stub_1_5 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.14625946</td>
<td headers="stub_1_5 R000005_Product_Description" class="gt_row gt_right" style="color: #FF0000; font-weight: bold;">0.7736078</td>
<td headers="stub_1_5 R000006_Product_Images" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_5 R000007_Order_Accuracy" class="gt_row gt_right">0.6305591</td>
<td headers="stub_1_5 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.54607410</td>
<td headers="stub_1_5 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.5747142</td>
<td headers="stub_1_5 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.5879939</td>
<td headers="stub_1_5 R000012_Overall_Value" class="gt_row gt_right">0.5502345</td></tr>
    <tr><th id="stub_1_6" scope="row" class="gt_row gt_left gt_stub">R000007_Order_Accuracy</th>
<td headers="stub_1_6 R003000_Overall_Satisfaction" class="gt_row gt_right">0.5827870</td>
<td headers="stub_1_6 R000003_Delivery_Time" class="gt_row gt_right">0.6145661</td>
<td headers="stub_1_6 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.16959359</td>
<td headers="stub_1_6 R000005_Product_Description" class="gt_row gt_right">0.6509746</td>
<td headers="stub_1_6 R000006_Product_Images" class="gt_row gt_right">0.6305591</td>
<td headers="stub_1_6 R000007_Order_Accuracy" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_6 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.45393918</td>
<td headers="stub_1_6 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.5399908</td>
<td headers="stub_1_6 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.6453447</td>
<td headers="stub_1_6 R000012_Overall_Value" class="gt_row gt_right">0.5236993</td></tr>
    <tr><th id="stub_1_7" scope="row" class="gt_row gt_left gt_stub">R000009_Ease_of_NavigatingPA_PROLink</th>
<td headers="stub_1_7 R003000_Overall_Satisfaction" class="gt_row gt_right">0.6142104</td>
<td headers="stub_1_7 R000003_Delivery_Time" class="gt_row gt_right">0.3699018</td>
<td headers="stub_1_7 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.08943948</td>
<td headers="stub_1_7 R000005_Product_Description" class="gt_row gt_right">0.5634418</td>
<td headers="stub_1_7 R000006_Product_Images" class="gt_row gt_right">0.5460741</td>
<td headers="stub_1_7 R000007_Order_Accuracy" class="gt_row gt_right">0.4539392</td>
<td headers="stub_1_7 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">1.00000000</td>
<td headers="stub_1_7 R000010_Ease_of_Placing_Order" class="gt_row gt_right" style="color: #FF0000; font-weight: bold;">0.7165311</td>
<td headers="stub_1_7 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.4766387</td>
<td headers="stub_1_7 R000012_Overall_Value" class="gt_row gt_right">0.5096731</td></tr>
    <tr><th id="stub_1_8" scope="row" class="gt_row gt_left gt_stub">R000010_Ease_of_Placing_Order</th>
<td headers="stub_1_8 R003000_Overall_Satisfaction" class="gt_row gt_right">0.6317569</td>
<td headers="stub_1_8 R000003_Delivery_Time" class="gt_row gt_right">0.4581992</td>
<td headers="stub_1_8 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.12954312</td>
<td headers="stub_1_8 R000005_Product_Description" class="gt_row gt_right">0.5900835</td>
<td headers="stub_1_8 R000006_Product_Images" class="gt_row gt_right">0.5747142</td>
<td headers="stub_1_8 R000007_Order_Accuracy" class="gt_row gt_right">0.5399908</td>
<td headers="stub_1_8 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right" style="color: #FF0000; font-weight: bold;">0.71653113</td>
<td headers="stub_1_8 R000010_Ease_of_Placing_Order" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_8 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.5206984</td>
<td headers="stub_1_8 R000012_Overall_Value" class="gt_row gt_right">0.5128571</td></tr>
    <tr><th id="stub_1_9" scope="row" class="gt_row gt_left gt_stub">R000011_Stock_Availability_Accuracy</th>
<td headers="stub_1_9 R003000_Overall_Satisfaction" class="gt_row gt_right">0.5970378</td>
<td headers="stub_1_9 R000003_Delivery_Time" class="gt_row gt_right">0.6251557</td>
<td headers="stub_1_9 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.13952907</td>
<td headers="stub_1_9 R000005_Product_Description" class="gt_row gt_right">0.6111687</td>
<td headers="stub_1_9 R000006_Product_Images" class="gt_row gt_right">0.5879939</td>
<td headers="stub_1_9 R000007_Order_Accuracy" class="gt_row gt_right">0.6453447</td>
<td headers="stub_1_9 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.47663870</td>
<td headers="stub_1_9 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.5206984</td>
<td headers="stub_1_9 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">1.0000000</td>
<td headers="stub_1_9 R000012_Overall_Value" class="gt_row gt_right">0.5794517</td></tr>
    <tr><th id="stub_1_10" scope="row" class="gt_row gt_left gt_stub">R000012_Overall_Value</th>
<td headers="stub_1_10 R003000_Overall_Satisfaction" class="gt_row gt_right">0.5641530</td>
<td headers="stub_1_10 R000003_Delivery_Time" class="gt_row gt_right">0.5202923</td>
<td headers="stub_1_10 R000004_Delivery_Driver_Friendliness" class="gt_row gt_right">0.11844941</td>
<td headers="stub_1_10 R000005_Product_Description" class="gt_row gt_right">0.5652662</td>
<td headers="stub_1_10 R000006_Product_Images" class="gt_row gt_right">0.5502345</td>
<td headers="stub_1_10 R000007_Order_Accuracy" class="gt_row gt_right">0.5236993</td>
<td headers="stub_1_10 R000009_Ease_of_NavigatingPA_PROLink" class="gt_row gt_right">0.50967315</td>
<td headers="stub_1_10 R000010_Ease_of_Placing_Order" class="gt_row gt_right">0.5128571</td>
<td headers="stub_1_10 R000011_Stock_Availability_Accuracy" class="gt_row gt_right">0.5794517</td>
<td headers="stub_1_10 R000012_Overall_Value" class="gt_row gt_right">1.0000000</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
<p>This looks better as is, and most of the time it should be enough, but the other potential issue we have with this approach is that it doesn’t give us any information on the significance of the correlation, the confidence intervals or the method used to extract the coefficient. To get those, a very nice wrapper is the <code>correlation()</code> function from the package with the same name. It automatically gives out a tidy table like the one we accomplished with <code>cor.test()</code> but for multiple pairs of correlations. To achieve this, you can simply replace the <code>cor()</code> call from the prior calls and use correlation instead. ## Correlation pairs</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(correlation)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    cx_data<span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(R003000_Overall_Satisfaction<span class="sc">:</span>R000012_Overall_Value)<span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>      correlation<span class="sc">::</span><span class="fu">correlation</span>()<span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9691bdda56198fbe4912" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9691bdda56198fbe4912">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45"],["R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R000003_Delivery_Time","R000003_Delivery_Time","R000003_Delivery_Time","R000003_Delivery_Time","R000003_Delivery_Time","R000003_Delivery_Time","R000003_Delivery_Time","R000003_Delivery_Time","R000004_Delivery_Driver_Friendliness","R000004_Delivery_Driver_Friendliness","R000004_Delivery_Driver_Friendliness","R000004_Delivery_Driver_Friendliness","R000004_Delivery_Driver_Friendliness","R000004_Delivery_Driver_Friendliness","R000004_Delivery_Driver_Friendliness","R000005_Product_Description","R000005_Product_Description","R000005_Product_Description","R000005_Product_Description","R000005_Product_Description","R000005_Product_Description","R000006_Product_Images","R000006_Product_Images","R000006_Product_Images","R000006_Product_Images","R000006_Product_Images","R000007_Order_Accuracy","R000007_Order_Accuracy","R000007_Order_Accuracy","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000009_Ease_of_NavigatingPA_PROLink","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy"],["R000003_Delivery_Time","R000004_Delivery_Driver_Friendliness","R000005_Product_Description","R000006_Product_Images","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000004_Delivery_Driver_Friendliness","R000005_Product_Description","R000006_Product_Images","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000005_Product_Description","R000006_Product_Images","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000006_Product_Images","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000011_Stock_Availability_Accuracy","R000012_Overall_Value","R000012_Overall_Value"],[0.5961719049933,0.102370729846941,0.577059999087708,0.5340616920266,0.582880760874964,0.614262203065953,0.631836258733385,0.597093460434812,0.564288973442838,0.138346254578878,0.493139268782866,0.484321612423456,0.614610274431877,0.369901826429565,0.458259363010212,0.625155708225838,0.52037029674063,0.138091568226571,0.146930787237241,0.169857969422653,0.0898417660904657,0.129503395902779,0.139914003231147,0.118944371016422,0.773666121322083,0.651053657834988,0.563504575583568,0.590173149573304,0.611223120885335,0.565404035478179,0.630644789142884,0.546113893431044,0.574700146052703,0.588053572015321,0.550383248691864,0.454009888297782,0.540083280694407,0.645388472850821,0.523832819983812,0.716549155172992,0.476724813575224,0.509767935379797,0.52075619622571,0.512987825103434,0.579529781650827],[0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95],[0.577556127020005,0.0741976610178304,0.55780932203512,0.513459881102325,0.56382174735483,0.59627134564758,0.614471155458039,0.578508946592046,0.544624853372216,0.110385222578695,0.47134694325295,0.462286701400351,0.596629674851432,0.345132173337652,0.435534313786469,0.607545643288125,0.499356199803706,0.110131677782614,0.119038618040968,0.142151825753435,0.0616102023642822,0.101487809049159,0.111967102247182,0.0908595280384291,0.762013816860133,0.634390115642616,0.5438132792295,0.571357108554331,0.593124314435765,0.545775626757334,0.613234948322612,0.525878125759653,0.555374400993041,0.569164567304002,0.530279995956423,0.431176114342861,0.519662177478501,0.628513462705515,0.502923054933392,0.702449614285683,0.454484592157276,0.488445612060753,0.499753443709856,0.49176066392181,0.56035813698377],[0.614167979008404,0.130380521623202,0.595690113648856,0.554048195189202,0.601319293977316,0.631636361608608,0.648589446074092,0.61505837069618,0.583333010879353,0.166088467824994,0.51432978927181,0.505758752168414,0.631974119906089,0.394156564781528,0.480400667216599,0.642151482070444,0.540772501528592,0.165833072918306,0.174591236792432,0.197298166947824,0.117929687479888,0.157313742449582,0.167639750555651,0.146840165683499,0.784817578212683,0.667112408066253,0.582575717858263,0.608369082779192,0.628704481558673,0.584412283910238,0.647442210986747,0.565731791254861,0.593405479521501,0.606322199298623,0.569867952865485,0.476262494185238,0.559887636622599,0.66165618692188,0.544129802264949,0.730086509136738,0.498371031268585,0.530481861036464,0.541146940003316,0.53360559613265,0.598080745193258],[51.2529993833892,7.10386848247609,48.7740629101957,43.6096724509084,49.5173006953935,53.7343634582129,56.275941194043,51.3760684852465,47.1818807989869,9.64060114182743,39.1255973971462,38.2090513552462,53.7776438303948,27.477545375959,35.5864060355721,55.2784111980779,42.0601339479997,9.62351816775503,10.2537687412821,11.8967691357,6.22686654859819,9.01540618078909,9.75304159516809,8.26844529614574,84.2896622797911,59.2090805186273,47.080806870385,50.4647919647483,53.303729112195,47.3188615309346,56.0937488132696,45.0008266671144,48.4810230579115,50.1822146262259,45.5046611268644,35.1702228013219,44.2976292141241,58.3171687328765,42.4498115774534,70.9104825368277,37.4316332653122,40.8980343582746,42.1029253374027,41.2525581024925,49.0828877057289],[4764,4765,4765,4766,4765,4765,4766,4764,4765,4763,4764,4764,4764,4763,4764,4763,4764,4764,4765,4764,4765,4765,4764,4764,4765,4765,4764,4765,4764,4765,4765,4765,4766,4764,4765,4764,4765,4764,4765,4765,4764,4764,4764,4765,4764],[0,2.78499769047021e-12,0,0,0,0,0,0,0,5.10585212578917e-21,1.9837186332099e-289,9.77153491031027e-278,0,2.0460097034046e-153,4.22900421613e-245,0,0,5.10585212578917e-21,1.63024281652279e-23,3.14942771571182e-31,5.16759109487083e-10,1.11459204025733e-18,2.0220167242347e-21,5.22811965182102e-16,0,0,0,0,0,0,0,0,0,0,0,4.53419130988165e-240,0,0,0,0,6.09642662771732e-268,1.82134582077148e-312,0,4.0226390106626e-317,0],["Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation"],[4766,4767,4767,4768,4767,4767,4768,4766,4767,4765,4766,4766,4766,4765,4766,4765,4766,4766,4767,4766,4767,4767,4766,4766,4767,4767,4766,4767,4766,4767,4767,4767,4768,4766,4767,4766,4767,4766,4767,4767,4766,4766,4766,4767,4766]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Parameter1<\/th>\n      <th>Parameter2<\/th>\n      <th>r<\/th>\n      <th>CI<\/th>\n      <th>CI_low<\/th>\n      <th>CI_high<\/th>\n      <th>t<\/th>\n      <th>df_error<\/th>\n      <th>p<\/th>\n      <th>Method<\/th>\n      <th>n_Obs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9,11]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>A nice feature of this function is that it allows to keep all redundant pairs, which makes it easy to filter for just one variable on one column so we can see its correlation to the rest of the variables instead of seeing all pairs. For example, if we are interestes in seeing how all possible key drivers correlate to OSAT, we can simply add another pipe and filter for OSAT in the first column</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>   cx_data<span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(R003000_Overall_Satisfaction<span class="sc">:</span>R000012_Overall_Value)<span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>      correlation<span class="sc">::</span><span class="fu">correlation</span>(<span class="at">redundant =</span> T)<span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Parameter1 <span class="sc">==</span> <span class="st">"R003000_Overall_Satisfaction"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">datatable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-138122b8a40aa6fee2c7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-138122b8a40aa6fee2c7">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction","R003000_Overall_Satisfaction"],["R003000_Overall_Satisfaction","R000003_Delivery_Time","R000004_Delivery_Driver_Friendliness","R000005_Product_Description","R000006_Product_Images","R000007_Order_Accuracy","R000009_Ease_of_NavigatingPA_PROLink","R000010_Ease_of_Placing_Order","R000011_Stock_Availability_Accuracy","R000012_Overall_Value"],[1,0.5961719049933,0.102370729846941,0.577059999087708,0.5340616920266,0.582880760874964,0.614262203065953,0.631836258733385,0.597093460434812,0.564288973442838],[0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95,0.95],[1,0.577556127020005,0.0741976610178304,0.55780932203512,0.513459881102325,0.56382174735483,0.59627134564758,0.614471155458039,0.578508946592046,0.544624853372216],[1,0.614167979008404,0.130380521623202,0.595690113648856,0.554048195189202,0.601319293977316,0.631636361608608,0.648589446074092,0.61505837069618,0.583333010879353],[null,51.2529993833892,7.10386848247609,48.7740629101957,43.6096724509084,49.5173006953935,53.7343634582129,56.275941194043,51.3760684852465,47.1818807989869],[4764,4764,4765,4765,4766,4765,4765,4766,4764,4765],[0,0,2.78499769047021e-12,0,0,0,0,0,0,0],["Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation","Pearson correlation"],[4766,4766,4767,4767,4768,4767,4767,4768,4766,4767]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Parameter1<\/th>\n      <th>Parameter2<\/th>\n      <th>r<\/th>\n      <th>CI<\/th>\n      <th>CI_low<\/th>\n      <th>CI_high<\/th>\n      <th>t<\/th>\n      <th>df_error<\/th>\n      <th>p<\/th>\n      <th>Method<\/th>\n      <th>n_Obs<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[3,4,5,6,7,8,9,11]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="corrplot" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="corrplot"><span class="header-section-number">1.2</span> Corrplot</h2>
<p>Finally as a bonus option to display correlations, we can use the package and function <code>corrplot</code> that allows to show correlations in a more visual way. The base function simply shows correlations in a color gradient. The main input it needs is a correlation matrix, so we can simply use the code we created before up until the <code>cor()</code> call and then simply add a call for the <code>corrplot()</code> function.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>cx_data<span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(R003000_Overall_Satisfaction<span class="sc">:</span>R000012_Overall_Value)<span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()<span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()<span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">corrplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="correlations_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This package has a lot of features that can get you to very advances forms of displaying not only correlations but any other types of matrices. I’d recommend you to check for more details in the following link:</p>
<blockquote class="blockquote">
<p>Pro tip:</p>
</blockquote>
<p>One issue with this function is that, since it shows vertically and horizontally the names of all your vars, given the name coding we tend to use here at SMG, this causes the graph to be very smalled compared to the text. There are few workarounds related to the package itself such as the <code>tl.srt</code> or <code>tl.cex</code> arguments inside the corrplot function, but also, another option is renaming all our variables into a nicer cleaner way. If we are only using vars starting with <code>R0...</code> we can simply use the code I show in the next box to get rid of the FNS and simply keep the name of each variable.</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>corrplot_data <span class="ot">&lt;-</span> cx_data<span class="sc">%&gt;%</span>  </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(UID, R003000_Overall_Satisfaction<span class="sc">:</span>R000012_Overall_Value)<span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>UID, <span class="at">names_to =</span> <span class="st">"var"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(var, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"FNS"</span>, <span class="st">"var"</span>), <span class="at">sep =</span> <span class="st">"_"</span>, <span class="at">extra =</span> <span class="st">"merge"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>FNS)<span class="sc">%&gt;%</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"var"</span>, <span class="at">values_from =</span> <span class="st">"value"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>UID)<span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()<span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor</span>()</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>corrplot_data<span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">corrplot</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="correlations_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looks better, but just to get you a gist of what this package is capable of, here is an example of what a final clean corrplot can look like with a few very simple tweaks</p>
<div class="cell">
<details>
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>  corrplot_data<span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">corrplot</span>(<span class="at">method =</span> <span class="st">"number"</span>,<span class="at">type =</span> <span class="st">'lower'</span>,<span class="at">tl.col =</span> <span class="st">'black'</span>,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">cl.ratio =</span> .<span class="dv">1</span>, <span class="at">tl.srt =</span> <span class="dv">45</span>,<span class="at">tl.cex =</span> <span class="fl">0.5</span>, <span class="at">number.cex=</span><span class="fl">0.7</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="correlations_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Preface</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./key_drivers.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Key Drivers models</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>